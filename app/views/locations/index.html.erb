
<%= render 'nav'%>
<p id="notice"><%= notice %></p>

<div class="container">

  <div class="row">

    <div class="col-md-6"> 
        <div id="map"></div>
    </div>

    <div class="col-md-6"> 

        <div>
            <h1>Right Now</h1>
            <p><canvas id="icon" width="128" height="128"></canvas> <%= @current_weather['temperature'] %></p>
            <p><%= @current_weather['summary'] %> - Feels like: <%= @current_weather['apparentTemperature'] %></p>
        </div>

    </div>
    
  </div>
</div>


<table>
  <thead>
    <tr>
      <th>Postal code</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @locations.each do |location| %>
      <tr>
        <td><%= location.postal_code %></td>
        <td><%= location.latitude %></td>
        <td><%= location.longitude %></td>
        <td><%= link_to 'Show', location %></td>
        <td><%= link_to 'Edit', edit_location_path(location) %></td>
        <td><%= link_to 'Destroy', location, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Location', new_location_path %>



<script>
  var skycons = new Skycons({"color": "black"});

  skycons.add("icon", Skycons.<%= @current_weather['icon'].upcase.tr("-", "_") %>);

  skycons.play();


</script>

<script type="text/javascript">
  function initMap() {
  var myLatLng = {lat: <%= @location.latitude %>, lng: <%= @location.longitude %>};

  // Create a map object and specify the DOM element for display.
  var map = new google.maps.Map(document.getElementById('map'), {
    center: myLatLng,
    scrollwheel: false,
    zoom: 4
  });

  // Create a marker and set its position.
  var marker = new google.maps.Marker({
    map: map,
    position: myLatLng,
    title: 'Location'
  });
}
</script>



<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyByfnWFF9BqHtoQVkaDksVG0z8z4q31rVg&callback=initMap"
    async defer></script>




